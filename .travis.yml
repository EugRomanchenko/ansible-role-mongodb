language: python
python:
- '2.7'
install:
- pip install ansible==2.3.0 molecule apache-libcloud
script:
- molecule --debug create
- molecule --debug converge
- molecule verify
after_script:
- molecule destroy
env:
  matrix:
  - GCE_CREDENTIALS_FILE="$(pwd)/credentials.json"
  global:
  - secure: SR7MIEJ6PE4bbFuH36z9CGEZMBzxgQkAxSCFHxMYiAtV5bNVNOy/s7xbDUzfi2wri4I6r+xx5QbHcTS89a3TTOdOagzxCwg7u/RMwfQajdxNVCWcZEz32ELNsD0ro7ypQZgq6myO/vWEheoLCiAG9vy21MdSsreU7brkGqSH7GkDaHAYzF7RXEFmDZhXASt5QMql78+Ng0aLHtaiD55VqtRNNuhhVRlTEldzfJ93Ky3zM+bplELZQAfNA9toKL+mi35og9K19spuflFpwxl8blZL5RaeINzc91+Y8nmqwAqLXkKKNxC4tI7eBZ2/7Q56GRZcpLBqPeCpXHCztI54OzD5oqDE3J9uQKXbfyQyeMIDApjlifPL8QgchZxBA5/9AUkX/NqNzEgCPdQHZkUnWEs2gYywkQDjlnPSiwvt8/i6dYG3Irhue+NE8KGWJcomw5Uluxb76FgAhMvctr1CjFANgz7dJVLH+2PerkuY/YboDYZgBdmowQtRs0ey+liyn7dC78YVpEolyTKEULJDgg7YvqHEdkAzZKCgKL9sBSFBX9GMd0px/IZLiSRGzz9HDqxmVTjpm+CFSBqRg8T0IzLBBtZLrQILne+UEUBqhZNJgLkCmGDgBqAuxBqo65lL6151MwuA3/zeI5uMpK6rWdkxkOwzRhSSxpRV9OW3FNo=
  - secure: gkRE1NP0ihFvaePAhuTXR16xon25J7FBx1E9kgffF4Gp1ifQXUoijdsgP09nc2q2UrBUxdSB6P7Ck1o/ALo1PZmUA6ZKCa0sjr0yN3qpFCsZyne/R1tjW8aF8qrBvjCZ2Mjt0tFxTu/xhyTi+b0UE5+YAeqa5GXnUSvNFXGMk29YkaFPCFGoRIoLv0iLnsbBEshtJmTVVp2CUFqWN+sy3Z9qxDRh8zfW5PUQteSUqoIquUoMTAXQTuFz1OqsIbd2wW5sCuTy5A2iAzjuMd3BQtv2SNARYfr/JibX97rOt5PGL2clhIVSD464OJpGSAloKdiFPUYf8DWhO2Guy4ET3zRCDgC1X3iXnaNzwIY7PKgI2jDZq0ISD19z3kosIpK1jPrKZOBVeydJi62XTLYDXeasZiyMK5DuYm42/PucJSBL/z5JZAnxfVjyRjuIZuYwwBfThcxoQt6w3FOVDMfLH6m43RIqn8xiAo6XxhtmCFsSwNILYd98RbG4AaH6M68yVzrnH2DxWZlfTIdoPQj/FBezM/UadIxdkhUyebsvs3sZzxBg9TMTK1h5LgxP896YYwmEO2ea/uQPPtOMojsnwf86loG/qYoCtcXznDPwCIzpZzkL+2jyb5l5Mf+p1ZaeDSMJqZBl6yAPY6ghVeEbEJvK5wsMyYqBecgxVj9uLug=
  - secure: Q2do+gWidoln/7SCcKsgK/97QX9SEmmVTZiXH0HE5fS+ifkag8zGlWdh59MB9hD0pOYkzbUOmrqYllkl+Hofv+IsBq8t1VTS7fuID8uEw34hpaMK+UhVMXagDq6Z0Xo9swI6nWKUyys3LIl/663o6N8u9cu/ZYTNQH25UWYI6hEx/RJvqGPXSde6HoQHTc6R+nuM5+f6gwMnEE0eiUehwHL1v4TbheKO6oW7I7YE3Dvu8sMDsM3F+fMp8aX1p2OK80C+ITh+sJM1868c2c6lhHV9n46m72JNIucA5/u8WbaVdt8i6uCms4qjMlwZCLppcNd+WAaZlWpKtBEDN7Qw5VZEL+y1wUZlFPRdH4cD/kQiWTH/Pg0VDyjOyCgCpmkZs3sEKxxDRcfL5nWYLnrnsSUma+p7vqHyL9T9RfbMQlpWgTrpDBBDn+mZiME9qlyWwHZu9VJh87dhpWT6iSu2nyHGVoKg81Ut9XCPtQvY0CAKsdQTwRIpyKXFzSHZWbqhBzvyEdmOEdlT9EhGpIYIqVV/zKIKN86pFmqDTbgzfG7J5DDM+cSZErUNlJ1hg1P5zGzJWwbpinJ4ChJYHTbeNtsudX7m0iP+nf6IUj5GK5L92f2ZdAmWQS2YnniXhNchuIkkKVSMrm4FC2JktkJnpa379i7fvXL/cO9eKwNof/w=
before_install:
- openssl aes-256-cbc -K $encrypted_677a56b8f0a8_key -iv $encrypted_677a56b8f0a8_iv
  -in secrets.tar.enc -out secrets.tar -d
- tar xvf secrets.tar
- mv google_compute_engine /home/travis/.ssh/
- chmod 0600 /home/travis/.ssh/google_compute_engine
notifications:
  slack:
    secure: Nw4tfUD1P9sKp8M3BpE/GZmOnqitqsrypHelJ1UURT0v+jRrOHy4HhI77vKs2RRVSxsiKrGcwlcSnMwmkgNuQdaNASLtsaYjzm6Rtf6CHqzzc/Dy9DIxBXYC5oCkcsJLef1uGYfGFzXRum+NKAFuLsvNZbLiuE2rDeXSyBTZ9AnM1DYqAVd+k12s0T0Rca8Kw5vzyEOn35Rf4y2MjFdbs8NyuzFRLMuOVedNrEFJLioKNDKtglyh0lJ4uU9OjYASg1bJ8TgY1wBgcqSe6vA1CRB/1P0qDJiZdVNCTGmBGwBn9EbwivsA3nzcnfdQbPh2x2VKghrF8BzBJl6qDqBMZBo+Ag9Oc8kKy79BJahOOoJA1DwFYoleURK5vR0ksm2paSjKRbDeXcDcni45id4YVv1dOOGbFIF1EplvcTFNId7DiU/5cURb8NwuUnAF9Qubm7MRAzLvxajp5FEa4VYHtwyxMDP17WDMqh4aH/O/5ir8k31MqUCeJGer5pFUDI9ux8ipFpHCDJaVMqh/1uv+TXjP0cpuDlSdmJJxmdl305chtAeMxSPIGpn85ncrMNQfgfZnBFsDoPl9ePi86/c1kOHpSnLzKScFmj2c7VwKSxNdA6rJMG7rdSbdw8QUsGXVP4SCXRsjIWGlrMFxDtQ5CLnpLgnrVocAWsU/8fc0HdE=
